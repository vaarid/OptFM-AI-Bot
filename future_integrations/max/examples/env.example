# Пример переменных окружения для интеграции с MAX мессенджером
# Скопируйте этот файл в .env и заполните необходимые значения

# ===== СУЩЕСТВУЮЩИЕ ПЕРЕМЕННЫЕ OptFM Bot =====

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# FastAPI Configuration
HOST=0.0.0.0
PORT=8000

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/app.log
API_LOG_FILE=logs/api.log

# Database Configuration (for future iterations)
DATABASE_URL=postgresql://user:password@localhost:5432/optfm_bot

# ===== НОВЫЕ ПЕРЕМЕННЫЕ ДЛЯ MAX МЕССЕНДЖЕРА =====

# MAX Messenger API Configuration
# Получите API ключ на https://max-api.chat
MAX_API_KEY=your_max_api_key_here

# BASE URL для MAX API (обычно не нужно менять)
MAX_BASE_URL=https://max-api.chat/api

# URL для webhook'а - должен быть доступен из интернета
# Пример: https://yourdomain.com/webhook/max/
MAX_WEBHOOK_URL=https://your-domain.com/webhook/max/

# Секретный токен для проверки подлинности webhook'ов (опционально)
# Рекомендуется использовать для безопасности
MAX_WEBHOOK_SECRET=your_webhook_secret_here

# ===== ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ MAX =====

# Таймаут для HTTP запросов к MAX API (в секундах)
MAX_TIMEOUT=10

# Количество попыток повтора при ошибках API
MAX_RETRY_ATTEMPTS=3

# Ограничение на количество сообщений в минуту (rate limiting)
MAX_RATE_LIMIT=30

# ===== НАСТРОЙКИ БЕЗОПАСНОСТИ =====

# Включить/выключить проверку подписи webhook'ов
MAX_VERIFY_SIGNATURE=true

# Список разрешенных IP адресов для webhook'ов (через запятую)
# Оставьте пустым чтобы разрешить все IP
MAX_ALLOWED_IPS=

# ===== НАСТРОЙКИ ЛОГИРОВАНИЯ ДЛЯ MAX =====

# Уровень логирования для MAX модуля
MAX_LOG_LEVEL=INFO

# Отдельный файл для логов MAX (опционально)
MAX_LOG_FILE=logs/max.log

# Логировать все входящие сообщения (может быть много данных)
MAX_LOG_MESSAGES=true

# Логировать все исходящие ответы
MAX_LOG_RESPONSES=true

# ===== ПРИМЕРЫ ЗАПОЛНЕНИЯ =====

# Пример с реальными (но фиктивными) данными:
# MAX_API_KEY=sk_max_1234567890abcdef1234567890abcdef
# MAX_WEBHOOK_URL=https://mybot.example.com/webhook/max/
# MAX_WEBHOOK_SECRET=MySecretToken123!

# ===== ИНСТРУКЦИИ ПО НАСТРОЙКЕ =====

# 1. Получение API ключа:
#    - Перейдите на https://max-api.chat
#    - Зарегистрируйтесь или войдите в аккаунт
#    - Создайте новый бот и получите API ключ
#    - Скопируйте ключ в переменную MAX_API_KEY

# 2. Настройка webhook'а:
#    - Убедитесь что ваш сервер доступен из интернета
#    - Настройте HTTPS (обязательно для webhook'ов)
#    - Укажите полный URL в MAX_WEBHOOK_URL
#    - Добавьте секретный токен для безопасности

# 3. Тестирование:
#    - Запустите бота с новой конфигурацией
#    - Проверьте статус интеграции: GET /webhook/max/status
#    - Отправьте тестовое сообщение: POST /webhook/max/test

# 4. Безопасность:
#    - Используйте сложный секретный токен
#    - Регулярно обновляйте API ключи
#    - Мониторьте логи на подозрительную активность
#    - Настройте firewall для ограничения доступа к webhook'у

# ===== ОТЛАДКА =====

# Для отладки можно временно включить детальное логирование:
# LOG_LEVEL=DEBUG
# MAX_LOG_LEVEL=DEBUG
# MAX_LOG_MESSAGES=true
# MAX_LOG_RESPONSES=true

# И проверить статус интеграции через API:
# curl http://localhost:8000/webhook/max/status
